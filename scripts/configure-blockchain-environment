# This is a stupid script. If you have more than 1 blockchain it will fail.
# Use at your own risk. But if you followed the installation instructions to the letter it
# should make the config process fast.

# This will use aws cli to populate environment variables with the correct values

region=us-east-1
networkid=$(aws managedblockchain list-networks --query 'Networks[0].Id' --output text)
networkname=$(aws managedblockchain list-networks --query 'Networks[0].Name' --output text)
vpcendpointservicename=$(aws managedblockchain get-network --region $region --network-id $networkid \
                       --query 'Network.VpcEndpointServiceName' --output text)

export REGION=$region
export NETWORKID=$networkid
export NETWORKNAME=$networkname
export VPCENDPOINTSERVICENAME=$vpcendpointservicename

echo
echo "** The following environment variables have been set **"
echo REGION=$region
echo NETWORKID=$networkid
echo NETWORKNAME=$networkname
echo VPCENDPOINTSERVICENAME=$vpcendpointservicename
echo